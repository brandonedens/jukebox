{% extends "artist/base.html" %}
{% load markup %}
{% load digg_templatetag %}

{% block title %}{{ block.super }} - Artist List{% endblock %}

{% block css %}
{{ block.super }}
<link href="{{ MEDIA_URL }}css/artist/artist_list.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block aside %}
<article>
  <nav>
    <h1>By Alpha</h1>
    <a href="">A</a>
    <a href="">B</a>
    <a href="">C</a>
    <a href="">D</a>
    <a href="">E</a>
    <a href="">F</a>
    <a href="">G</a>
    <a href="">H</a>
    <a href="">I</a>
    <a href="">J</a>
    <a href="">K</a>
    <a href="">L</a>
    <a href="">M</a>
    <a href="">N</a>
    <a href="">O</a>
    <a href="">P</a>
    <a href="">Q</a>
    <a href="">R</a>
    <a href="">S</a>
    <a href="">T</a>
    <a href="">U</a>
    <a href="">V</a>
    <a href="">W</a>
    <a href="">X</a>
    <a href="">Y</a>
    <a href="">Z</a>
  </nav>
</article>
{{ block.super }}
{% endblock %}

{% block content %}

{% digg_paginator %}

{% for artist in artist_list %}
<article id="artist-{{ artist.id }}">
  <a href="{{ artist.get_absolute_url }}">
    <h1 class="name">{{ artist.name }}</h1>
  </a>
  {% with artist.random_photo as photo %}
  {% if photo %}
  <div class="photo">
    <img src="{{ MEDIA_URL }}{{ photo.image }}"
         alt="{{ photo.caption }}"
         width="200" />
  </div>
  {% endif %}
  {% endwith %}
  <div class="song-info">
    {% if artist.song_set.all %}
    (
    {% if artist.album_set.all %}
    {{ artist.album_set.all|length }} album{{ artist.album_set.all|pluralize }}
    {% endif %}
    {{ artist.song_set.all|length }} track{{ artist.song_set.all|pluralize }}
    )
    {% else %}
    ( No songs currently uploaded )
    {% endif %}
  </div>
  <div class="timestamp">
    added on: {{ artist.added_on|date }}
  </div>
  <div class="description">
    {{ artist.description|markdown|truncatewords_html:100 }}
    <a class="button grey more"
       href="{% url artist_detail artist.id %}">
      more
      <span></span>
    </a>
  </div>
  <div class="clear">&nbsp;</div>
</article>
{% endfor %}

{% digg_paginator %}

{% endblock %}

