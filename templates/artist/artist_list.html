{% extends "artist/base.html" %}
{% load markup %}

{% block title %}AS220 Jukebox - Artist List{% endblock %}

{% block css %}
{{ block.super }}
<link href="{{ MEDIA_URL }}css/artist/artist_list.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}

{% for artist in artist_list %}
<article id="artist-{{ artist.id }}">
  <a href="{{ artist.get_absolute_url }}">
    <h1 class="name">{{ artist.name }}</h1>
  </a>
  {% with artist.random_photo as photo %}
  {% if photo %}
  <div class="photo">
    <img src="{{ MEDIA_URL }}{{ photo.image }}"
         alt="{{ photo.caption }}"
         width="200" />
  </div>
  {% endif %}
  {% endwith %}
  <div class="song-info">
    {% if artist.song_set.all %}
    (
    {% if artist.album_set.all %}
    {{ artist.album_set.all|length }} album{{ artist.album_set.all|pluralize }}
    {% endif %}
    {{ artist.song_set.all|length }} track{{ artist.song_set.all|pluralize }}
    )
    {% else %}
    ( No songs currently uploaded )
    {% endif %}
  </div>
  <div class="timestamp">
    added on: {{ artist.added_on|date }}
  </div>
  <div class="description">
    {{ artist.description|markdown|truncatewords_html:100 }}
    <a class="button grey more"
       href="{% url artist_detail artist.id %}">
      more
      <span></span>
    </a>
  </div>
  <div class="clear">&nbsp;</div>
</article>
{% endfor %}

{% if is_paginated %}
<div class="pagination">
  <span class="step-links">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
    {% endif %}

    <span class="current">
      Page {{ page_obj.number }} of {{ paginator.num_pages }}.
    </span>

    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">next</a>
    {% endif %}
  </span>
</div>
{% endif %}

{% endblock %}

